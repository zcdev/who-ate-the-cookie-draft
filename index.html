<!DOCTYPE html>
<html lang="en">
	<head>
		<style>
			button {width: 20%; font-size: 30px; padding: 15px; margin: 15px;}
		</style>
	</head>
<body>
	<h1>Who ate the cookie?</h1>
	<button class="p1">David</button>
	<button class="p2">Lisa</button>
	<button class="p3">Sam</button>
	<button class="p4">Julia</button>
	<script>
        let p1 = document.querySelector('.p1');
        let p2 = document.querySelector('.p2');
        let p3 = document.querySelector('.p3');
        let p4 = document.querySelector('.p4');

		let synth = window.speechSynthesis;
		let voices = [];
		let p1Click = 0;
		let p2Click = 0;
		let p3Click = 0;
		let p4Click = 0;
		let lastClick = 0;

		let lastSpeak = ["I didn't eat it.", "I don't know.", "Who knows?", "I don't really care.", "Someone in the kitchen.", "I was in the living room.", "There was nothing on the table.", "I only got milk.", "I don't like cookies.", "It's not me.", "Forget it.", "I was not hungry.", "Ok, it's me."];

		p1.onclick = function () {
			let p1Speak = ["I think it's Sam."];
			voices = synth.getVoices();
			let p1Msg = new SpeechSynthesisUtterance();
			
			p1Msg.voice = voices[7];

			if (p1Click < p1Speak.length ) {
				p1Msg.text = p1Speak;
				p1Click++;
			} else {
				if (lastClick < lastSpeak.length) {
					p1Msg.text = lastSpeak[lastClick];
					lastClick++	
				} else {
					p1Msg.text = "Game over.";
				}
			}

			synth.speak(p1Msg)	
		}

		p2.onclick = function () {
			let p2Speak = ["Ask David."];
			voices = synth.getVoices(); 
			let p2Msg = new SpeechSynthesisUtterance();

			p2Msg.voice = voices[33];
			
			if (p2Click < p2Speak.length ) {
				p2Msg.text = p2Speak;
				p2Click++;
			} else {
				if (lastClick < lastSpeak.length) {
					p2Msg.text = lastSpeak[lastClick];
					lastClick++	
				} else {
					p2Msg.text = "Game over.";
				}
			}
			synth.speak(p2Msg);
		}

		p3.onclick = function () {
			let p3Speak = ["It must be Julia."];
			voices = synth.getVoices();
			let p3Msg = new SpeechSynthesisUtterance();

			p3Msg.voice = voices[0];
			
			if (p3Click < p3Speak.length ) {
				p3Msg.text = p3Speak;
				p3Click++;
			} else {
				if (lastClick < lastSpeak.length) {
					p3Msg.text = lastSpeak[lastClick];
					lastClick++	
				} else {
					p3Msg.text = "Game over.";
				}
			}

			synth.speak(p3Msg);
		}
		p4.onclick = function () {
			let p4Speak = ["Lisa knows."];
			voices = synth.getVoices(); 
			let p4Msg = new SpeechSynthesisUtterance();

			p4Msg.voice = voices[49];
			
			if (p4Click < p4Speak.length ) {
				p4Msg.text = p4Speak;
				p4Click++;
			} else {
				if (lastClick < lastSpeak.length) {
					p4Msg.text = lastSpeak[lastClick];
					lastClick++	
				} else {
					p4Msg.text = "Game over.";
				}
			}
			synth.speak(p4Msg);
		}
	</script>
</body>
</html>
